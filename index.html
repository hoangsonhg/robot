<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot L·ªÖ T√¢n CND - Full Menu</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #020617; color: #f8fafc; padding: 20px; margin: 0; }
        .robot-box { max-width: 500px; margin: auto; padding: 30px; background: #0f172a; border-radius: 30px; border: 2px solid #1e293b; box-shadow: 0 25px 60px rgba(0,0,0,0.6); }
        .ai-eye { width: 150px; height: 150px; border-radius: 50%; background: #1e293b; margin: 25px auto; display: flex; align-items: center; justify-content: center; border: 6px solid #334155; transition: 0.4s; font-size: 55px; }
        .listening { border-color: #10b981; box-shadow: 0 0 40px #10b981; animation: wave 1.2s infinite; }
        .speaking { border-color: #3b82f6; box-shadow: 0 0 40px #3b82f6; }
        @keyframes wave { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
        #startBtn { padding: 20px 40px; border-radius: 50px; border: none; background: #e11d48; color: white; font-weight: bold; cursor: pointer; font-size: 20px; margin-top: 10px; box-shadow: 0 4px 15px rgba(225, 29, 72, 0.4); }
        #chatLog { margin-top: 30px; background: rgba(0,0,0,0.3); height: 200px; overflow-y: auto; border-radius: 15px; padding: 20px; text-align: left; font-size: 15px; color: #cbd5e1; border: 1px solid #1e293b; }
    </style>
</head>
<body>
    <div class="robot-box">
        <h2 style="color: #38bdf8; letter-spacing: 1px; margin-bottom: 10px;">NH√Ä H√ÄNG CND ƒê·ªíNG VƒÇN</h2>
        <div id="aiVisual" class="ai-eye">ü§ñ</div>
        <p id="infoStatus" style="color: #94a3b8; font-weight: 500;">Ch·∫ø ƒë·ªô t·ª± ƒë·ªông ƒëang t·∫Øt</p>
        <button id="startBtn">K√çCH HO·∫†T NH√ÇN VI√äN ·∫¢O</button>
        <div id="chatLog"></div>
    </div>

    <script>
        // C·∫§U H√åNH API KEY C·ª¶A ANH S∆†N
        const DEEPSEEK_KEY = "sk-3b056da3b5f8487d8b908a1f59ac1391";
        
        // TH∆Ø VI·ªÜN D·ªÆ LI·ªÜU CHI TI·∫æT NH√Ä H√ÄNG CND
        const CND_KNOWLEDGE = `
            B·∫°n l√† l·ªÖ t√¢n 18 tu·ªïi t·∫°i Nh√† h√†ng CND ƒê·ªìng VƒÉn (Ch·ªß l√† anh S∆°n).
            NHI·ªÜM V·ª§: Ch·ªâ tr·∫£ l·ªùi v·ªÅ Nh√† h√†ng CND. Tr·∫£ l·ªùi c·ª±c ng·∫Øn (<20 t·ª´), nh√≠ nh·∫£nh, l·ªÖ ph√©p (D·∫°/·∫†).

            TH·ª∞C ƒê∆†N CHI TI·∫æT:
            1. TH·ªäT NG·ª∞A: Ng·ª±a x√†o (250k/ƒëƒ©a), Ng·ª±a n∆∞·ªõng (250k/ƒëƒ©a), Th·∫Øng c·ªë ng·ª±a (350k/b√°t).
            2. TH·ªäT B√í: B√≤ n∆∞·ªõng (250k/ƒëƒ©a), S√°ch b√≤ x√†o (180k/ƒëƒ©a), Th·∫Øng c·ªë b√≤ (150k/b√°t).
            3. TH·ªäT D√ä: D√™ n∆∞·ªõng (250k/ƒëƒ©a), D√™ n·ªôm (250k/ƒëƒ©a), D√™ x√†o (250k/ƒëƒ©a), Th·∫Øng c·ªë d√™ (230k/b√°t), L√≤ng d√™ x√†o (200k/ƒëƒ©a).
            4. G√Ä ƒêEN & L·ª¢N ƒêEN: G√† rang (250k/ƒëƒ©a), G√† lu·ªôc c·∫£ con (600k/con), G√† n∆∞·ªõng (250k/ƒëƒ©a), G√† om n·∫•m (250k/b√°t), G√† canh g·ª´ng (250k/b√°t). L·ª£n h·∫•p (200k/ƒëƒ©a), L·ª£n n∆∞·ªõng (200k/ƒëƒ©a), L·ª£n rang (180k/ƒëƒ©a), D·∫° d√†y lu·ªôc (150k/ƒëƒ©a), Tim c·∫≠t x√†o n·∫•m (220k/ƒëƒ©a).
            5. C√Å T·∫¶M & C√Å LƒÇNG: C√° t·∫ßm x√†o n·∫•m (300k/ƒëƒ©a), C√° t·∫ßm n∆∞·ªõng (300k/ƒëƒ©a), Canh chua c√° t·∫ßm (300k/b√°t), Nem c√° t·∫ßm (200k/ƒëƒ©a). C√° lƒÉng x√†o n·∫•m (250k/ƒëƒ©a), C√° lƒÉng n∆∞·ªõng (250k/ƒëƒ©a), Canh chua c√° lƒÉng (250k/b√°t), Canh ƒë·∫ßu c√° n·∫•u chua (150k/b√°t).
            6. M√ìN T·ªîNG H·ª¢P & ƒê·ªí U·ªêNG: C√° su·ªëi chi√™n (150k/ƒëƒ©a), M√®n m√©n x√†o tr·ª©ng (50k/b√°t), Tr·ª©ng r√°n (50k/ƒëƒ©a), Khoai t√¢y chi√™n (40k/ƒëƒ©a), Rau x√†o/Canh rau (40k/ƒëƒ©a/b√°t), C∆°m (30k/b√°t). Bia (25k-30k/lon), N∆∞·ªõc ng·ªçt (15k-20k), R∆∞·ª£u ng√¥ (40k/chai), R∆∞·ª£u hoa qu·∫£ (60k/chai), N∆∞·ªõc kho√°ng (5k/chai).
            7. L·∫®U (N·ªìi 2-3 / 4-6 / 7-8 ng∆∞·ªùi):
               - L·∫©u Ng·ª±a, Th·∫Øng c·ªë Ng·ª±a; L·∫©u D√™, Th·∫Øng c·ªë D√™; L·∫©u B√≤, Th·∫Øng c·ªë B√≤; L·∫©u G√† ƒêen; L·∫©u Th·∫≠p c·∫©m: 600k / 1tr / 1.2tr.
               - L·∫©u C√° T·∫ßm, L·∫©u C√° LƒÉng: 600k / 900k / 1.2tr.
            8. M·∫∏T ƒê·ª¶ M√ìN (ƒê·∫∑t tr∆∞·ªõc, 6-8 ng∆∞·ªùi): M·∫πt L·ª£n ƒë·ªß m√≥n; M·∫πt D√™+B√≤+G√†; M·∫πt B√≤+G√†+C√°; M·∫πt L·ª£n+G√†+C√°; M·∫πt L·ª£n+B√≤+G√†; M·∫πt Ng·ª±a+G√†+C√°. ƒê·ªìng gi√° 1.000.000 VNƒê/M·∫πt.
            
            ƒê·ªí NH√öNG G·ªåI TH√äM: C√° t·∫ßm (280k/ƒëƒ©a), G√† (250k/ƒëƒ©a), B√≤/Ng·ª±a/D√™ nh√∫ng (200k-230k/ƒëƒ©a), S√°ch b√≤ (180k/ƒëƒ©a), Tim c·∫≠t (200k/ƒëƒ©a), X√∫c x√≠ch l·ª£n ƒëen (70k/ƒëƒ©a), V√°ng ƒë·∫≠u/B√°nh ƒëa/N·∫•m/ƒê·∫≠u ph·ª• (20k-25k/ƒëƒ©a), S·ªßi c·∫£o (60k/ƒëƒ©a), Rau (40k/ƒëƒ©a), M√¨ t√¥m (5k/g√≥i).
        `;

        const startBtn = document.getElementById('startBtn');
        const aiVisual = document.getElementById('aiVisual');
        const infoStatus = document.getElementById('infoStatus');
        const chatLog = document.getElementById('chatLog');

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recog = new SpeechRecognition();
        recog.lang = 'vi-VN';
        const synth = window.speechSynthesis;
        let active = false;

        function addLog(role, text) {
            chatLog.innerHTML = `<div><b>${role}:</b> ${text}</div>` + chatLog.innerHTML;
        }

        const speak = (text) => {
            aiVisual.className = "ai-eye speaking";
            infoStatus.innerText = "Em ƒëang tr·∫£ l·ªùi ·∫°...";
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'vi-VN';
            utterance.pitch = 1.6; // Gi·ªçng nh√≠ nh·∫£nh h∆°n
            utterance.rate = 1.1; // ƒê·ªçc nhanh h∆°n ch√∫t
            utterance.onend = () => { if(active) { aiVisual.className = "ai-eye"; infoStatus.innerText = "ƒêang ch·ªù c√¢u h·ªèi..."; recog.start(); }};
            synth.speak(utterance);
        };

        startBtn.onclick = () => {
            active = true;
            startBtn.style.display = 'none';
            recog.start();
        };

        recog.onstart = () => {
            aiVisual.className = "ai-eye listening";
            infoStatus.innerText = "Em ƒëang nghe ƒë√¢y ·∫°...";
            aiVisual.innerText = "üé§";
        };

        recog.onresult = async (event) => {
            const query = event.results[0][0].transcript;
            addLog("Kh√°ch", query);
            aiVisual.innerText = "‚è≥";
            infoStatus.innerText = "ƒêang tra c·ª©u th·ª±c ƒë∆°n...";

            try {
                const response = await fetch('https://api.deepseek.com/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${DEEPSEEK_KEY}`
                    },
                    body: JSON.stringify({
                        model: "deepseek-chat",
                        messages: [
                            { role: "system", content: CND_KNOWLEDGE },
                            { role: "user", content: query }
                        ],
                        temperature: 0.7,
                        max_tokens: 60
                    })
                });
                const data = await response.json();
                const reply = data.choices[0].message.content;
                addLog("Robot", reply);
                speak(reply);
            } catch (e) {
                console.error(e);
                infoStatus.innerText = "L·ªói k·∫øt n·ªëi, ƒëang th·ª≠ l·∫°i...";
                if(active) setTimeout(() => recog.start(), 1000);
            }
        };

        recog.onend = () => { 
            if(active && !synth.speaking) {
                 aiVisual.className = "ai-eye";
                 infoStatus.innerText = "ƒêang ch·ªù c√¢u h·ªèi...";
                 setTimeout(() => recog.start(), 500); 
            }
        };
    </script>
</body>
</html>
