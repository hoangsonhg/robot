<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot CND ƒê·ªìng VƒÉn - Si√™u T·ªëc</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #010409; color: #e6edf3; padding: 20px; margin: 0; }
        .robot-box { max-width: 480px; margin: auto; padding: 30px; background: #0d1117; border-radius: 40px; border: 3px solid #30363d; box-shadow: 0 30px 60px rgba(0,0,0,0.8); }
        .ai-pulse { width: 160px; height: 160px; border-radius: 50%; background: #161b22; margin: 25px auto; display: flex; align-items: center; justify-content: center; border: 8px solid #30363d; transition: 0.3s; font-size: 60px; }
        .listening { border-color: #238636; box-shadow: 0 0 40px #238636; animation: breath 1s infinite; }
        .speaking { border-color: #1f6feb; box-shadow: 0 0 40px #1f6feb; }
        @keyframes breath { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        #startBtn { padding: 20px 40px; border-radius: 50px; border: none; background: #238636; color: white; font-weight: bold; cursor: pointer; font-size: 22px; box-shadow: 0 10px 20px rgba(35, 134, 54, 0.3); }
        #chatLog { margin-top: 30px; background: rgba(0,0,0,0.5); height: 180px; overflow-y: auto; border-radius: 20px; padding: 20px; text-align: left; font-size: 15px; line-height: 1.6; border: 1px solid #30363d; }
    </style>
</head>
<body>
    <div class="robot-box">
        <h2 style="color: #58a6ff; text-transform: uppercase;">Nh√† H√†ng CND ƒê·ªìng VƒÉn</h2>
        <div id="aiVisual" class="ai-pulse">üéôÔ∏è</div>
        <p id="infoStatus" style="color: #8b949e; font-weight: 500;">B·∫•m n√∫t ƒë·ªÉ em tr·ª±c qu·∫ßy cho anh!</p>
        <button id="startBtn">K√çCH HO·∫†T ROBOT</button>
        <div id="chatLog"></div>
    </div>

    <script>
        const API_KEY = "AIzaSyCs8gITrFcSUHYe_6KeJnWrcQd0tBdMgwo";
        const MODEL = "gemini-3.0-flash"; // B·∫£n si√™u t·ªëc nh·∫•t 2026
        
        const SYSTEM_PROMPT = `
            B·∫†N L√Ä L·ªÑ T√ÇN NH√Ä H√ÄNG CND ƒê·ªíNG VƒÇN. Ch·ªß l√† anh S∆°n (ƒê·∫ßu b·∫øp, Ph√≥ Ch·ªß t·ªãch H·ªôi Du l·ªãch, ƒê·∫°i bi·ªÉu HƒêND).
            PHONG C√ÅCH: N·ªØ, 18 tu·ªïi, nh√≠ nh·∫£nh, l·ªÖ ph√©p (D·∫°/·∫†). Tr·∫£ l·ªùi c·ª±c ng·∫Øn d∆∞·ªõi 12 t·ª´.
            TH·ª∞C ƒê∆†N CND:
            - L·∫©u (Ng·ª±a/B√≤/D√™/G√† ƒëen): 600k (2-3 ng∆∞·ªùi), 1tr (4-6 ng∆∞·ªùi), 1.2tr (7-8 ng∆∞·ªùi).
            - M·∫πt ƒë·ªß m√≥n (6-8 ng∆∞·ªùi): 1.000.000ƒë/m·∫πt.
            - M√≥n l·∫ª: Ng·ª±a x√†o/n∆∞·ªõng (250k), Th·∫Øng c·ªë ng·ª±a (350k), G√† lu·ªôc (600k), C√° t·∫ßm n∆∞·ªõng (300k).
            DU L·ªäCH: T∆∞ v·∫•n Gi·∫øng N∆∞·ªõc Th·∫ßn, Hang T·∫£ L·ªßng, hoa Tam gi√°c m·∫°ch. Web: dulichcaonguyenda.com.
        `;

        const startBtn = document.getElementById('startBtn');
        const aiVisual = document.getElementById('aiVisual');
        const infoStatus = document.getElementById('infoStatus');
        const chatLog = document.getElementById('chatLog');

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recog = new SpeechRecognition();
        recog.lang = 'vi-VN';
        const synth = window.speechSynthesis;
        let active = false;

        function logMsg(role, text) {
            chatLog.innerHTML = `<div><b>${role}:</b> ${text}</div>` + chatLog.innerHTML;
        }

        const speak = (text) => {
            aiVisual.className = "ai-pulse speaking";
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'vi-VN';
            utterance.pitch = 1.5; 
            utterance.rate = 1.2;
            utterance.onend = () => { if(active) recog.start(); };
            synth.speak(utterance);
        };

        startBtn.onclick = () => { active = true; startBtn.style.display = 'none'; recog.start(); };

        recog.onstart = () => {
            aiVisual.className = "ai-pulse listening";
            infoStatus.innerText = "Em ƒëang nghe ƒë√¢y anh S∆°n...";
            aiVisual.innerText = "üü¢";
        };

        recog.onresult = async (event) => {
            const query = event.results[0][0].transcript;
            logMsg("Kh√°ch", query);
            aiVisual.innerText = "‚è≥";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: SYSTEM_PROMPT + " Kh√°ch h·ªèi: " + query }] }] })
                });
                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;
                logMsg("Robot", reply);
                speak(reply);
            } catch (e) {
                if(active) setTimeout(() => recog.start(), 1000);
            }
        };

        recog.onend = () => { if(active && !synth.speaking) setTimeout(() => recog.start(), 300); };
    </script>
</body>
</html>
